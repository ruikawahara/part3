{"version":3,"sources":["components/Filter.js","components/PersonForm.js","service/persons.js","components/DeletePerson.js","components/ShowPersonInfo.js","components/Notification.js","App.js","index.js"],"names":["Filter","searchName","handleSearch","type","placeholder","value","onChange","PersonForm","handleClick","newName","handleFormText","newNumber","handleFormNumber","onSubmit","required","pattern","baseUrl","getAll","axios","get","then","res","data","create","newPersonObj","post","deletePerson","id","delete","update","put","DeletePerson","person","persons","setPersons","setErrMsg","e","preventDefault","window","confirm","name","servicePerson","filter","n","catch","err","setTimeout","style","display","ShowOnePerson","number","ShowPersonInfo","filteredPersons","toLowerCase","includes","map","key","msg","className","App","useState","setNewName","setNewNumber","setSearchName","submitMsg","setSubmitMsg","errMsg","useEffect","initPersons","alert","console","log","Notification","target","some","changeTarget","find","changedPersons","modifiedPerson","Person","createdPerson","length","concat","response","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0NAeeA,EAbA,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,aAC1B,OACI,mDACuB,2BACfC,KAAK,OACLC,YAAY,SACZC,MAAOJ,EACPK,SAAUJ,MCgCXK,EAvCI,SAAC,GAEmB,IAFjBC,EAEgB,EAFhBA,YAClBC,EACkC,EADlCA,QAASC,EACyB,EADzBA,eACTC,EAAkC,EAAlCA,UAAWC,EAAuB,EAAvBA,iBACX,OAEI,0BAAMC,SAAUL,GAEZ,6BACI,sCACU,2BACFL,KAAK,OACLC,YAAY,YACZC,MAAOI,EACPH,SAAUI,EACVI,UAAQ,KAIhB,wCACY,2BACJX,KAAK,MACLY,QAAQ,YACRX,YAAY,eACZC,MAAOM,EACPL,SAAUM,EACVE,UAAQ,MAKpB,6BAEI,4BAAQX,KAAK,UAAb,U,gBC5BVa,EAAO,eAWE,GAAEC,OATF,kBAAMC,IAAMC,IAAIH,GAASI,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAS/BC,OAPV,SAACC,GAAD,OAAkBN,IAAMO,KAAKT,EAASQ,GAAcJ,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAOlDI,aALZ,SAACC,GAAD,OAAQT,IAAMU,OAAN,UAAgBZ,EAAhB,YAA2BW,IAAMP,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAK/BO,OAHhC,SAACF,EAAIH,GAAL,OAAsBN,IAAMY,IAAN,UAAad,EAAb,YAAwBW,GAAMH,GAAcJ,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UCmBlFS,EA9BM,SAAC,GAAgD,IAA9CC,EAA6C,EAA7CA,OAAQC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAsBjD,OACI,0BAAMtB,SAtBW,SAAAuB,GACjBA,EAAEC,iBAEiBC,OAAOC,QAAP,iBAAyBP,EAAOQ,KAAhC,OAEfC,EACKf,aAAaM,EAAOL,IACpBP,KAAKc,EAAWD,EAAQS,QAAO,SAAAC,GAAC,OAAIA,EAAEhB,KAAOK,EAAOL,QACpDiB,OAAM,SAAAC,GACHV,EAAU,kBAAD,OACaH,EAAOQ,KADpB,0CAGTM,YAAW,WACPX,EAAU,QACX,KAEHD,EAAWD,EAAQS,QAAO,SAAAC,GAAC,OAAIA,EAAEhB,KAAOK,EAAOL,WAOvDoB,MAAO,CAAEC,QAAS,iBAClB,4BAAQ7C,KAAK,UAAb,YCNN8C,EAAgB,SAAC,GAAgD,IAA9CjB,EAA6C,EAA7CA,OAAQC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAClD,OACI,6BACKH,EAAOQ,KADZ,IACmBR,EAAOkB,OAD1B,IACkC,kBAAC,EAAD,CAAclB,OAAQA,EAAQC,QAASA,EAASC,WAAYA,EAAYC,UAAWA,MAK9GgB,EA3BQ,SAAC,GAAoD,IAAlDlB,EAAiD,EAAjDA,QAAShC,EAAwC,EAAxCA,WAAYiC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAEjDiB,EAAkBnB,EACnBS,QAAO,SAAAV,GAAM,OAAIA,EAAOQ,KAAKa,cACzBC,SAASrD,EAAWoD,kBAE7B,OACI,6BACKD,EAAgBG,KAAI,SAAAvB,GAAM,OACvB,kBAAC,EAAD,CAAewB,IAAKxB,EAAOL,GACvBK,OAAQA,EACRC,QAASA,EACTC,WAAYA,EACZC,UAAWA,SCShB,G,MAtBA,SAAC,GAAa,IAAXsB,EAAU,EAAVA,IACd,OAAY,OAARA,EACO,KAGP,yBAAKC,UAAU,WACVD,KAgBE,EAXH,SAAC,GAAa,IAAXA,EAAU,EAAVA,IACX,OAAY,OAARA,EACO,KAGP,yBAAKC,UAAU,SACVD,ICkHEE,EA/HH,WAAO,IAAD,EAEcC,mBAAS,IAFvB,mBAET3B,EAFS,KAEAC,EAFA,OAGc0B,mBAAS,IAHvB,mBAGTnD,EAHS,KAGAoD,EAHA,OAIkBD,mBAAS,IAJ3B,mBAITjD,EAJS,KAIEmD,EAJF,OAKoBF,mBAAS,IAL7B,mBAKT3D,EALS,KAKG8D,EALH,OAOkBH,mBAAS,MAP3B,mBAOTI,EAPS,KAOEC,EAPF,OAQYL,mBAAS,MARrB,mBAQTM,EARS,KAQD/B,EARC,KAqBhBgC,qBAVoB,WAClB1B,EACGxB,SACAG,MAAK,SAAAgD,GAAW,OAAIlC,EAAWkC,MAC/BxB,OAAM,SAAAC,GACLwB,MAAM,mCACNC,QAAQC,IAAI1B,QAIK,IAkFvB,OACE,6BACE,yCACA,kBAAC2B,EAAD,CAAqBf,IAAKO,IAC1B,kBAACQ,EAAD,CAAkBf,IAAKS,IACvB,kBAAC,EAAD,CAAQjE,WAAYA,EAAYC,aAlFf,SAACkC,GAAD,OAAO2B,EAAc3B,EAAEqC,OAAOpE,UAoF/C,yCACA,kBAAC,EAAD,CAAYG,YAnFI,SAAC4B,GAInB,GAHAA,EAAEC,iBAGEJ,EAAQyC,MAAK,SAAA1C,GAAM,OAAIA,EAAOQ,KAAKa,gBAAkB5C,EAAQ4C,iBAAgB,CAI/E,GAFsBf,OAAOC,QAAP,UAAkB9B,EAAlB,yEAEH,CAEjB,IAAMkE,EAAe1C,EAAQ2C,MAAK,SAAA5C,GAAM,OAAIA,EAAOQ,KAAKa,gBAAkB5C,EAAQ4C,iBAC5EwB,EAAc,2BAAQF,GAAR,IAAsBzB,OAAQvC,IAElD8B,EACGZ,OAAO8C,EAAahD,GAAIkD,GACxBzD,MAAK,SAAA0D,GACJ5C,EAAWD,EACRsB,KAAI,SAAAvB,GAAM,OACTA,EAAOQ,KAAKa,gBAAkB5C,EAAQ4C,cAAgBrB,EAAS8C,SAEpElC,OAAM,SAAAC,GACLwB,MAAM,WAAD,OACQM,EAAanC,KADrB,2CAGL8B,QAAQC,IAAI1B,WAKf,CAEH,IAAMrB,EAAe,CAAEgB,KAAM/B,EAASyC,OAAQvC,GAE9C8B,EAAcsC,OAAOxD,OAAOC,GACzBJ,MAAK,SAAA4D,GACAvE,EAAQwE,OAAS,IACnB/C,EAAWD,EAAQiD,OAAOF,IAC1Bf,EAAa,SAAD,OAAUxD,IACtBqC,YAAW,WACTmB,EAAa,QACZ,SAGNrB,OAAM,SAAAC,GACLwB,MAAM,WAAD,OACQ7C,EAAagB,KADrB,wBAGLL,EAAU,GAAD,OAAIU,EAAIsC,SAAS7D,OAC1BgD,QAAQC,IAAI1B,EAAIsC,SAAS7D,SAsB/BuC,EAAW,IACXC,EAAa,KAaTrD,QAASA,EAASC,eAxFD,SAAC0B,GAAD,OAAOyB,EAAWzB,EAAEqC,OAAOpE,QAyF5CM,UAAWA,EAAWC,iBAxFH,SAACwB,GAAD,OAAO0B,EAAa1B,EAAEqC,OAAOpE,UA2FlD,uCACA,kBAAC,EAAD,CAAgB4B,QAASA,EACvBhC,WAAYA,EACZiC,WAAYA,EACZC,UAAWA,MC3HnBiD,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.35bc80c2.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ searchName, handleSearch }) => {\r\n    return (\r\n        <div>\r\n            filter shown with: <input\r\n                type=\"text\"\r\n                placeholder=\"search\"\r\n                value={searchName}\r\n                onChange={handleSearch}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ handleClick,\r\n    newName, handleFormText,\r\n    newNumber, handleFormNumber }) => {\r\n    return (\r\n\r\n        <form onSubmit={handleClick}>\r\n\r\n            <div>\r\n                <div>\r\n                    name: <input\r\n                        type=\"text\"\r\n                        placeholder=\"Your Name\"\r\n                        value={newName}\r\n                        onChange={handleFormText}\r\n                        required\r\n                    />\r\n                </div>\r\n\r\n                <div>\r\n                    number: <input\r\n                        type=\"tel\"\r\n                        pattern=\"[0-9\\-]+\"\r\n                        placeholder=\"Phone Number\"\r\n                        value={newNumber}\r\n                        onChange={handleFormNumber}\r\n                        required\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n            <div>\r\n\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\n\r\n// for part 2\r\n// const baseUrl = `http://localhost:3001/persons`\r\n\r\n// for part 3\r\nconst baseUrl = `/api/persons`\r\n\r\nconst getAll = () => axios.get(baseUrl).then(res => res.data)\r\n\r\nconst create = (newPersonObj) => axios.post(baseUrl, newPersonObj).then(res => res.data)\r\n\r\nconst deletePerson = (id) => axios.delete(`${baseUrl}/${id}`).then(res => res.data)\r\n\r\nconst update = (id, newPersonObj) => axios.put(`${baseUrl}/${id}`, newPersonObj).then(res => res.data)\r\n\r\n\r\nexport default { getAll, create, deletePerson, update }","import React from 'react'\r\nimport servicePerson from '../service/persons'\r\n\r\nconst DeletePerson = ({ person, persons, setPersons, setErrMsg }) => {\r\n    const removePerson = e => {\r\n        e.preventDefault()\r\n\r\n        const gotRemoved = window.confirm(`Delete ${person.name}?`)\r\n        if (gotRemoved) {\r\n            servicePerson\r\n                .deletePerson(person.id)\r\n                .then(setPersons(persons.filter(n => n.id !== person.id)))\r\n                .catch(err => {\r\n                    setErrMsg(\r\n                        `Information of ${person.name} has already been removed from server`\r\n                    )\r\n                    setTimeout(() => {\r\n                        setErrMsg(null)\r\n                    }, 5000)\r\n\r\n                    setPersons(persons.filter(n => n.id !== person.id))\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={removePerson}\r\n            style={{ display: 'inline-block' }}>\r\n            <button type=\"submit\">Delete</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default DeletePerson;","import React from 'react'\r\nimport DeletePerson from './DeletePerson'\r\n\r\nconst ShowPersonInfo = ({ persons, searchName, setPersons, setErrMsg }) => {\r\n\r\n    const filteredPersons = persons\r\n        .filter(person => person.name.toLowerCase()\r\n            .includes(searchName.toLowerCase()))\r\n\r\n    return (\r\n        <div>\r\n            {filteredPersons.map(person =>\r\n                <ShowOnePerson key={person.id}\r\n                    person={person}\r\n                    persons={persons}\r\n                    setPersons={setPersons}\r\n                    setErrMsg={setErrMsg}\r\n                />)}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ShowOnePerson = ({ person, persons, setPersons, setErrMsg }) => {\r\n    return (\r\n        <div>\r\n            {person.name} {person.number} <DeletePerson person={person} persons={persons} setPersons={setPersons} setErrMsg={setErrMsg} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShowPersonInfo ","import React from 'react'\r\nimport '../index.css'\r\n\r\nconst Sucses = ({ msg }) => {\r\n    if (msg === null)\r\n        return null\r\n\r\n    return (\r\n        <div className=\"success\">\r\n            {msg}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Err = ({ msg }) => {\r\n    if (msg === null)\r\n        return null\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {msg}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default { Sucses, Err } ","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport ShowPersonInfo from './components/ShowPersonInfo'\nimport servicePerson from './service/persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchName, setSearchName] = useState('')\n\n  const [submitMsg, setSubmitMsg] = useState(null)\n  const [errMsg, setErrMsg] = useState(null)\n\n  // GET request\n  const getDataHook = () => {\n    servicePerson\n      .getAll()\n      .then(initPersons => setPersons(initPersons))\n      .catch(err => {\n        alert('Error: Cannot Display ALL Items')\n        console.log(err)\n      })\n  }\n\n  useEffect(getDataHook, [])\n\n  // functions \n  const handleFormText = (e) => setNewName(e.target.value)\n  const handleFormNumber = (e) => setNewNumber(e.target.value)\n  const handleSearch = (e) => setSearchName(e.target.value)\n\n  const handleClick = (e) => {\n    e.preventDefault()\n\n    // no longer case sensitive \n    if (persons.some(person => person.name.toLowerCase() === newName.toLowerCase())) {\n      // PUT request\n      const replaceNumber = window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)\n\n      if (replaceNumber) {\n        //const changeTarget = persons.find(person => person.name === newName)\n        const changeTarget = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\n        const changedPersons = { ...changeTarget, number: newNumber }\n\n        servicePerson\n          .update(changeTarget.id, changedPersons)\n          .then(modifiedPerson => {\n            setPersons(persons\n              .map(person =>\n                person.name.toLowerCase() !== newName.toLowerCase() ? person : modifiedPerson)) //lower case compatibility\n          })\n          .catch(err => {\n            alert(\n              `person \"${changeTarget.name}\" may be a duplicate or does not exist`\n            )\n            console.log(err)\n          })\n\n      }\n    }\n    else {\n      // POST request\n      const newPersonObj = { name: newName, number: newNumber }\n      // for part 3\n      servicePerson.Person.create(newPersonObj)\n        .then(createdPerson => {\n          if (newName.length > 2) {\n            setPersons(persons.concat(createdPerson))\n            setSubmitMsg(`Added ${newName}`)\n            setTimeout(() => {\n              setSubmitMsg(null)\n            }, 2000)\n          }\n        })\n        .catch(err => {\n          alert(\n            `person \"${newPersonObj.name}\" cannot be created`\n          )\n          setErrMsg(`${err.response.data}`)\n          console.log(err.response.data)\n        })\n\n      /* // for part 2\n      servicePerson.create(newPersonObj)\n        .then(returnedPerson =>\n          setPersons(persons.concat(returnedPerson)),\n          setSubmitMsg(`Added ${newName}`),\n          setTimeout(() => {\n            setSubmitMsg(null)\n          }, 2000)\n        )\n        .catch(err => {\n          alert(\n            `person \"${newPersonObj.name}\" cannot be created`\n          )\n\n          console.log(err.response.data)\n        })\n      */\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification.Sucses msg={submitMsg} />\n      <Notification.Err msg={errMsg} />\n      <Filter searchName={searchName} handleSearch={handleSearch} />\n\n      <h3>Add a new</h3>\n      <PersonForm handleClick={handleClick}\n        newName={newName} handleFormText={handleFormText}\n        newNumber={newNumber} handleFormNumber={handleFormNumber}\n      />\n\n      <h3>Numbers</h3>\n      <ShowPersonInfo persons={persons}\n        searchName={searchName}\n        setPersons={setPersons}\n        setErrMsg={setErrMsg}\n      />\n\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}